# 1. 基础概念

**学习目标：**

- 常握网络编程的基础概念：IP地址、端口、TCP协议、socket

## 知识点1：IP 地址介绍【重点】

**思考题**：

```
假设你在上海，你在自己电脑上打开了微信，你女朋友在北京，她在她的电脑上打开了微信，此时，你用微信给女
朋友发送了一条消息，这条信息是怎么到你女朋友的微信上的？？？
```

首先，信息肯定是通过网络进行传输的，但是网络上有那么多台电脑，信息是怎么到你女朋友的电脑上呢？

> IP地址的作用：**标识网络中唯一的一台设备(比如你女朋友的电脑)**

IP地址的表现形式：

- `IPv4`：点分十进制，由32个二进制位组成

  2的32次方：42亿

  ```bash
  139.227.220.247
  ```

- `IPv6`：冒号十六进制，由128个二进制位组成

  2的128次方

  ```
  2345:0425:2CA1:0000:0000:0567:5673:23b5
  ```

查看电脑的 IP 地址：

- Windows：`ipconfig`
- Linux 和 Mac：ifconfig

检查电脑网络是否正常：

- `ping www.baidu.com`  是否能连接互联网
- `ping 127.0.0.1`  本地回环地址，检查网卡是否正常

## 知识点2：端口和端口号介绍【重点】

**思考题**：

```
你发送的微信消息，通过IP地址传递到你女朋友的电脑之后(PS：你女朋友电脑开启了很多程序：QQ、微信等)，那
么这个消息是怎么传递给女朋友的微信程序，而不是QQ程序呢？
```

> 端口：标识一台设备的一个网络应用程序

一台计算机最多有65536个端口，为了区分端口，每个端口都有编号：`0-65535`，编写网络程序时，可以设置网络程序使用的端口号。

端口号分类：

- 知名端口号：范围是0到1023，系统预留的一些端口号，不建议使用
- 动态端口号：范围是1024到65535，建议使用
  - 一些动态端口号被一些常见程序占用了，自己写网络程序时，也不建议使用，比如：MySQL数据库 3306、redis数据库 6379、HDFS 9870等...
  - 如果程序员开发的网络程序没有设置端口号，操作系统会在动态端口号这个范围内随机生成一个给应用程序使用

> 当运行一个网络程序默认会有一个端口号，当这个程序退出时，所占用的这个端口号就会被释放。

假设微信使用端口：9999

## 知识点3：TCP协议介绍【重点】

**思考题**：

```
你发送的微信消息，在网络上进行传输时，怎么能保证不会丢失，一定能发送到你女朋友的微信呢？
```

这就涉及到非常著名的**TCP网络协议**。

**TCP概念**：

> 概念：TCP(Transmission Control Protocol) 是一种网络传输控制协议，它是一种**面向连接的、可靠的、基于字节流的传输层通信协议**。

传输的都是二进制 bytes 数据

**TCP 的特点**：

- 面向连接(三次握手)
- 可靠传输：保证数据不丢包\不乱序

![面向连接](E:\黑马培训\Python进阶笔记\assets\1.png)

**TCP 通信步骤**：

- 创建连接
- 传输数据
- 关闭连接

## 知识点4：socket介绍【重点】

**思考题：**

```
知道了IP、端口、TCP协议的概念之后，如何自己编写一个网络程序呢？
```

这就涉及到 socket 网络编程接口。

**[百度百科]** 所谓套接字(Socket)，就是对网络中不同主机上的应用进程之间进行双向通信的端点的抽象。一个套接字就是网络上进程通信的一端，提供了应用层进程利用网络协议交换数据的机制。从所处的地位来讲，套接字上联应用进程，下联网络协议栈，是应用程序通过网络协议进行通信的接口，是应用程序与网络协议栈进行交互的接口。

> socket (简称 套接字) 是**进程之间通信一个工具**，是操作系统提供的网络编程接口，屏蔽通过TCP/IP及端口进行网络数据传输的细节

- 作用：**进程之间的网络数据传输**
- 使用场景：**网络相关的应用程序或者软件都使用到了 socket** 

# 2. TCP程序开发

**学习目标**：

- 熟悉 TCP网络程序的开发流程

## 知识点5：TCP网络程序开发流程【熟悉】

**TCP网络程序开发流程**：

![img](E:\黑马培训\Python进阶笔记\assets\2.png)

1）客户端程序的开发流程：主动连接的

```python
1. 创建套接字对象
2. 连接服务端
3. 发送数据
4. 接受数据
5. 关闭连接
```

2）服务端程序的开发流程：等待连接的

```python
1. 创建监听套接字对象
2. 绑定端口
3. 开始监听
4. 等待连接
5. 发送数据
6. 接受数据
7. 关闭连接
```

## 知识点6：str和bytes的互相转换【常握】

**基础语法**：

```
str -> bytes：str.encode('编码方式：默认utf8')
bytes -> str：bytes.decode('解码方式：默认utf8')
```

**示例代码**：

```python
"""
str和bytes的互相转换
学习目标：知道str和bytes数据之间的互相转换
"""
# str -> bytes：str.encode('编码方式：默认utf8')
# bytes -> str：bytes.decode('解码方式：默认utf8')

my_str = '你好！中国！' # str

print(type(my_str), my_str)

res1 = my_str.encode('utf8')
print(type(res1), res1)

res2 = my_str.encode('gbk')
print(type(res2), res2)

res3 = res1.decode('utf8')
print(type(res3), res3)

res4 = res2.decode('gbk')
print(type(res4), res4)

# 注意：编码的方式和解码的方式必须一致
res5 = res1.decode('gbk') # 错误情况
print(type(res5), res5)

res6 = res2.decode('utf8') # 错误情况
print(type(res6), res6)
```

## 知识点7：TCP服务端程序开发【熟悉】

TCP服务端程序开发：

```python
"""
TCP 服务端程序开发
学习目标：理解 TCP 服务端程序的开发流程
"""
import socket
"""

可以理解为门童server_socket设置能接待什么样的客人，和客人来的路，然后接到了服务器端
传过来的客人，接着就把客人带给了向导service_client_socket,紧接着向导用自有的功能
recv接收客人反馈的信息，然后向导回答客人的信息，翻译成了标准的普通话二进制字节数据
接着服务结束，送走客人，自己和门童兄弟一起下班撸串
"""
# 创建服务器端监听套接字，门童迎接客户端发来的请求
# 第一个参数代表使用ipv4的地址，第二个参数表示使用TCP协议
server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 设置服务器使用的端口和ip
server_socket.bind(('127.0.0.1', 8085))

# 设置服务器同一时间最多能接收多少个客户端请求
server_socket.listen(128)

print('等待客户端发送数据...')

# 专门的向导service_client_socket接待门童迎接的客人
service_client_socket, ip_port = server_socket.accept()
print(f'接收到来自{ip_port}的连接.....')

# 接收客户端发送的消息
# 1024: 一次recv 最多接收到的字节
# 如果客户端没有发送信息过来，recv也会阻塞等待
recv_msg = service_client_socket.recv(1024)
print(f'客户端发送的消息为:{recv_msg.decode()}')

# 给客户端发送响应的信息
send_msg = input('请输入给客户端回应的消息: ')
service_client_socket.send(send_msg.encode())

# 关闭服务端的socket
server_socket.close()
service_client_socket.close()
```

## 知识点8：TCP客户端程序开发【熟悉】

TCP客户端程序开发：

```python
# 你的答案
import socket
from datetime import datetime
"""

第一步都是一样的告诉socket这次操作是使用什么ip地址和什么传输协议
第二步使用connect连接服务器端程序，地址与端口号要一致
第三步给服务器端发送信息，数据类型要是二进制字节
第四步接收服务器端返回的数据


"""
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# 通过客户端的服务器的socket连接服务器端程序
client_socket.connect(('127.0.0.1', 8085))

# 给服务器发消息
# send_msg = input('请输入发给服务器消息的: ')
while True:
        now_time = datetime.now()
        time_str = now_time.strftime("%Y-%m-%d %H:%M:%S")

        client_socket.send(time_str.encode())
        sleep(1)

# 客户端接收服务器的响应消息，最多1024个字节
recv_msg = client_socket.recv(1024)
print(f'接收到服务器端的响应消息为: {recv_msg.decode()}')

# 关闭客户端的socket

client_socket.close()

```

# **3.总结:**

1. **什么是TCP?**

> TCP(Transmission Control Protocol) 是一种网络传输控制协议，它是一种**面向连接的、可靠的、基于字节流的传输层通信协议**。

传输的都是二进制 bytes 数据

2. **端口：**标识一台设备的一个网络应用程序,一台计算机最多有65536个端口，为了区分端口，每个端口都有编号：`0-65535`，编写网络程序时，可以设置网络程序使用的端口号。
3. **IP地址的作用**:     **标识网络中唯一的一台设备(比如你女朋友的电脑)**
4. **什么是socket?**    socket (简称 套接字) 是**进程之间通信一个工具**，是操作系统提供的网络编程接口，屏蔽通过TCP/IP及端口进行网络数据传输的细节,只是细节被屏蔽了,能完成具体的通信功能
5. 总而言之,**端口**:  标识一台设备上的一个网络应用程序,而**ip地址** : 则是标识网络中唯一的一台设备
6. 网络通信图解:

![image-20220819205355714](E:\黑马培训\Python进阶笔记\assets\image-20220819205355714.png)

7. **补充知识点:**

![image-20220819205624858](E:\黑马培训\Python进阶笔记\assets\image-20220819205624858.png)

![image-20220819205502229](E:\黑马培训\Python进阶笔记\assets\image-20220819205502229.png)

8. **微信客户端之间的通信:**

![image-20220819205550367](E:\黑马培训\Python进阶笔记\assets\image-20220819205550367.png)

9. **服务端与客户端之间通信的原理示意图:**

   ![image-20220819205726260](E:\黑马培训\Python进阶笔记\assets\image-20220819205726260.png)

10. **socket通信的原理示意图:**

![image-20220819205859434](E:\黑马培训\Python进阶笔记\assets\image-20220819205859434.png)

11. **三次握手协议的图解示意图:**

    ![image-20220819210030145](E:\黑马培训\Python进阶笔记\assets\image-20220819210030145.png)

12. **html中 ol ul 标签之间只能够嵌套li标签**

![image-20220819210202312](E:\黑马培训\Python进阶笔记\assets\image-20220819210202312.png)

13. **制表:**

![image-20220819210141459](E:\黑马培训\Python进阶笔记\assets\image-20220819210141459.png)

14. **css装饰:**

​      ![image-20220819210301869](E:\黑马培训\Python进阶笔记\assets\image-20220819210301869.png)

## Python进阶day04-知识点总结

1）前端开发：html 和 css【了解】

**目标**：知道 html 和 css 的功能

* **html：编写网页语言，超文本标记语言**

  * html的基本结构

    ```python
    <!DOCTYPE html>
    <html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>网页标题</title>
    </head>
    <body>
        网页的主体内容
    </body>
    </html>
    ```

  * html的标签

    * 成对的标签：h1、h2、div、p
    * 单个的标签：hr、br、img
    * 带有属性的标签：img、a、...
    * 标签嵌套：成对出现的标签里面可以嵌套其他的标签
    * 列表标签：ul、ol、li
    * 表格标签：table、tr、td、th

* **css：层叠样式表，对html内容进行美化，或者进行布局的控制。**

  * css使用的3种方式：行内式、内嵌式、**外链式**
  * css选择器：选中页面上的标签，使用设置的样式进行控制
    * 标签选择器
    * 类选择器
    * id选择器
  * css的常见属性
    * 布局相关：width、height、backgroud、border
    * 文本相关：color、font-size、font-family、font-weight、line-height

* **javascript：也是一种编程语言，主要就是用来做前端开发（控制用户和网页之间的一些动态交互的行为）。**

  * 变量、函数、分支、循环...

2）网络编程的基础概念【熟悉】

* **IP：标识网络上的唯一的一台设备（电脑）**

  * IPV4：由点分十进制数字组成 `192.168.33.70` ，最多可以表示 2^32 个IP地址

  * IPV6：由冒号分隔十六进制数字组成，`fe80::354f:78cf:c800:e76a`，最多可以表示 2^128 个IP地址

  * 域名和IP之间的关系

    ![img](E:\黑马培训\Python进阶笔记\assets\1-16609574310141.png)

* **端口和端口号：标识一台机器上的一个网络程序**

  * 一台机器最多有65536个端口，编号`0-65535`
    * 知名端口号：`0-1023`
    * 动态端口号：`1024-65535`
    * 注意：同一时间，同一个机器上不能有多个网络程序同时使用相同的端口号。

* **TCP协议：网络传输控制协议**

  * 作用：面向连接、可靠的、基于字节流的网络数据传输控制协议。
  * UDP协议：不可靠网络传输协议，不需要建立连接

* **socket：网络编程的接口，或者说网络编程的工具**

  * 操作系统提供的一个网络编程的接口，屏蔽了TCP/IP协议以及底层网络数据传输的细节，使用socket就可以很简单的进行网络程序的开发。

  ![img](E:\黑马培训\Python进阶笔记\assets\2-16609574310172.png)

3）TCP网络程序的简单开发(服务端vs客户端)【熟悉】

![img](E:\黑马培训\Python进阶笔记\assets\3.png)



![img](E:\黑马培训\Python进阶笔记\assets\4.png)







